#!/usr/bin/env node
import { Command } from 'commander';
import { clean } from './clean-diagrams.js';
import { checkMissing } from './check-missing-diagrams.js';

const program = new Command();

program
  .name('vitepress-plugin-diagrams')
  .description('CLI tool for managing diagrams generated by vitepress-plugin-diagrams')
  .version('1.0.0');

program
  .command('clean')
  .description('Clean up unused diagram SVGs')
  .option('--delete', 'Actually remove unused SVGs')
  .option('--docs <path>', 'Root directory of markdown files', 'docs')
  .action((opts) => {
    clean(opts);
  });

program
  .command('check-missing')
  .description('Find diagrams referenced in markdown but missing in filesystem')
  .option('--docs <path>', 'Root directory of markdown files', 'docs')
  .action((opts) => {
    checkMissing(opts);
  });

program.parse();
